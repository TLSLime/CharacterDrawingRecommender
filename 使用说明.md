# 智能绘画角色推荐系统 - 使用说明

## 🎨 系统概述

智能绘画角色推荐系统是一个专为画师设计的桌面应用程序，通过多维度算法智能推荐每日绘画角色，帮助画师科学规划创作内容。

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行程序
```bash
python main.py
```
或双击 `run.bat` 文件

### 3. 初次使用
1. 启动程序后，首先添加角色
2. 在"角色管理"标签页点击"添加角色"
3. 填写角色信息并保存
4. 返回"今日推荐"页面，点击"生成推荐"

## 📊 主要功能

### 1. 今日推荐
- **智能推荐**: 基于多维度算法计算最适合今天创作的角色
- **推荐流程**: 生成推荐 → 确认推荐 → 完成创作
- **状态管理**: 自动跟踪推荐状态，避免重复推荐

### 2. 角色管理
- **添加角色**: 输入角色基本信息、喜爱度、人气值等
- **编辑角色**: 修改角色属性，更新喜爱度
- **删除角色**: 移除不需要的角色（会同时删除相关记录）
- **特殊日期**: 设置角色生日和作品发布日期

### 3. 月度目标
- **设置目标**: 选择本月要创作的角色列表
- **进度跟踪**: 实时显示目标完成进度
- **目标加成**: 目标角色在推荐中获得额外分数

### 4. 推荐历史
- **历史记录**: 查看所有推荐记录和完成状态
- **筛选功能**: 按完成状态、日期筛选记录
- **统计分析**: 了解推荐完成率和偏好趋势

### 5. 数据统计
- **创作统计**: 总创作数、月度创作数
- **完成率**: 推荐确认和完成的比率
- **角色排行**: 最常推荐的角色排行榜

## 🎯 推荐算法详解

### 核心公式
```
总得分 = (基础喜爱度×0.3 + 作品喜爱度×0.25 + 创作稀缺性×0.2 + 社区人气×0.15 + 时间衰减因子×0.1)
       + 特殊日期加成 + 鸽了补偿 + 月度目标加成
```

### 各项指标说明

#### 1. 基础喜爱度 (30%)
- 用户设定的0-100分值
- 最喜爱角色额外获得1.5倍加成

#### 2. 作品喜爱度 (25%)
- 对角色作品的满意度评分
- 每次完成创作后可以更新

#### 3. 创作稀缺性 (20%)
- 公式: `100 / (1 + 已创作数量)`
- 越少创作的角色得分越高

#### 4. 社区人气 (15%)
- 0-200: 10分
- 201-500: 30分
- 501-1000: 50分
- 1001-5000: 70分
- 5001-10000: 85分
- 10000+: 100分

#### 5. 时间衰减因子 (10%)
- 非最喜爱角色: `1 / (1 + 距离上次创作天数/30)`
- 最喜爱角色: 固定为1.0

#### 6. 特殊日期加成
- **角色生日前15天内**:
  - 最喜爱角色: +30分
  - 普通角色: +8分
- **作品发布日前15天内**:
  - 最喜爱角色: +20分
  - 普通角色: +5分

#### 7. 鸽了补偿
- 公式: `min(被鸽次数 × 5, 20)`
- 每次跳过推荐增加5分补偿，最高20分
- **重要**: 完成创作后鸽了次数会重置为0

#### 8. 自我评分加成
- **画爽了** (80-100分): 下次推荐权重+20%
- **正常水平** (41-79分): 权重不变
- **画得一般** (0-40分): 下次推荐权重-20%
- **重要**: 自我评分只影响下一次推荐，不会影响整体推荐算法

#### 9. 月度目标加成
- 月度目标角色获得+20分加成

## 💡 使用技巧

### 1. 角色设置建议
- **合理设置喜爱度**: 根据真实喜好程度设定，不要都设为100
- **及时更新人气值**: 根据角色在社区的热度更新
- **设置特殊日期**: 利用生日和发布日获得推荐加成

### 2. 推荐流程优化
- **每日查看**: 养成每天查看推荐的习惯
- **诚实确认**: 如实确认是否要创作该角色
- **及时记录**: 完成创作后及时记录并自我评分
- **诚实评分**: 如实评价自己的作品，系统会根据评分调整下次推荐权重
- **跳过机制**: 如果不想创作推荐角色，可以跳过推荐，系统会：
  - 增加该角色的鸽了次数（用于后续补偿）
  - 记录跳过时间，该角色当天不会被重新推荐
  - 结束本轮推荐，可以生成新的推荐
  - 完成其他角色创作后，被跳过的角色可以重新进入推荐池

### 3. 月度目标规划
- **合理数量**: 根据创作能力设置适量的目标角色
- **混合类型**: 包含不同类型、不同难度的角色
- **定期调整**: 根据实际情况调整目标

### 4. 数据维护
- **定期清理**: 删除不再需要的角色
- **更新信息**: 保持角色信息的准确性
- **备份数据**: 定期备份数据库文件

## 🗂️ 数据管理

### 数据存储位置
- 主数据库: `data/characters.db`
- 所有数据以SQLite格式存储

### 数据备份
1. 复制 `data/characters.db` 文件到安全位置
2. 建议定期备份（每周或每月）

### 数据恢复
1. 将备份的数据库文件覆盖到 `data/characters.db`
2. 重启程序即可恢复数据

## 🔧 故障排除

### 常见问题

#### 1. 程序无法启动
- 检查Python版本（需要3.8+）
- 确认依赖已正确安装: `pip install -r requirements.txt`
- 查看错误信息，可能缺少某些依赖

#### 2. 界面显示异常
- 确认PyQt5安装正确
- 检查屏幕分辨率和缩放设置
- 尝试重启程序

#### 3. 数据丢失
- 检查 `data` 目录是否存在
- 恢复备份的数据库文件
- 如果无备份，只能重新添加数据

#### 4. 推荐异常
- 确认至少有一个角色
- 检查角色数据完整性
- 查看错误日志信息

### 技术支持
如遇到问题，可以：
1. 查看程序输出的错误信息
2. 检查数据库文件完整性
3. 重新安装依赖包
4. 联系开发者获取帮助

## 📦 打包发布

### 创建可执行文件
```bash
# 安装PyInstaller（如果还没安装）
pip install pyinstaller

# 打包程序
pyinstaller build.spec
```

打包完成后，可执行文件位于 `dist` 目录中。

### 分发程序
1. 将整个 `dist` 目录复制给用户
2. 用户可以直接运行exe文件，无需安装Python
3. 确保目标系统兼容性（Windows版本）

## 📈 版本历史

### v1.0.0 (2024-09-06)
- 首个正式版本
- 实现完整的推荐算法
- 支持角色管理、推荐历史、数据统计
- 提供友好的图形界面

## 🎯 未来规划

### 计划功能
- [ ] 数据可视化图表
- [ ] 推荐算法自定义权重
- [ ] 角色标签和分类系统
- [ ] 创作时长记录
- [ ] 导入导出功能
- [ ] 云端数据同步

### 优化方向
- 界面美化和用户体验优化
- 算法智能化升级
- 性能优化和稳定性提升
- 多语言支持

---

**感谢使用智能绘画角色推荐系统！**
*让AI成为你创作路上的智能助手* 🎨✨
